import{$ as Ae,G as ge,H as ve,I as A,K as xe,L as ye,M as Ce,N as D,O as be,P as Se,Q as we,R as L,T as _e,U as ke,V as Ie,Z as Ee,a as ie,aa as Ne,c as re,d as ae,e as le,f as se,g as k,h as I,i as ce,j as me,k as de,l as E,u as pe,v as ue,w as fe,x as he}from"./chunk-Q2WTF2SQ.js";import{Fa as z,G,Gb as l,Hb as y,Ib as te,Ob as f,Ua as m,Wa as U,Y as q,Ya as Z,Zb as ne,_ as b,_a as $,ba as K,bb as Q,cb as v,e as O,ea as d,f as P,hb as x,ia as u,ic as oe,lb as S,ma as V,ob as g,pb as W,q as H,qb as X,rb as J,rc as _,sb as i,tb as r,ub as c,xb as w,ya as Y,yb as ee}from"./chunk-Y6UPOAOC.js";var Me=O(ye());function Oe(n,e){if(n&1&&(i(0,"a",5)(1,"mat-icon",9),l(2),r(),l(3),i(4,"p"),l(5),r()()),n&2){let t=e.$implicit;S("routerLink",t.link),m(2),y(t.icon),m(),te(" ",t.name," "),m(2),y(t.detail)}}function Pe(n,e){n&1&&(i(0,"a",6)(1,"mat-icon",9),l(2,"admin_panel_settings"),r(),l(3," Panel Admin "),i(4,"p"),l(5,"Configura el mensaje a enviar y el tiempo de espera entre mensajes"),r()())}function He(n,e){n&1&&(i(0,"mat-icon",10),l(1,"circle"),r(),i(2,"span",11),l(3,"Conectado"),r())}function Ge(n,e){n&1&&(i(0,"mat-icon",12),l(1,"circle"),r(),i(2,"span",11),l(3,"Desconectado"),r())}var N=class n{menuList=[{icon:"outgoing_mail",name:"Enviar Mensajes",link:"/menu/enviar-mensajes",detail:"Selecciona un archivo xlxs para extraer los datos y enviar mensajes."},{icon:"update",name:"Historial",link:"/menu/historial",detail:"Revisa el historial de mensajes enviados como mensaje previo al reparto"},{icon:"cable",name:"Instancia",link:"/menu/instancia",detail:"Conecta y desconecta la instancia (Recomendado mantener activo)"}];router=d(I);logout(){Me.default.fire({title:"\xBFEst\xE1s seguro?",text:"\xBFQuieres cerrar sesi\xF3n?",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(localStorage.removeItem("token"),this.router.navigate(["login"]))})}isAdmin=v(!1);ngOnInit(){this.verificarIsAdmin(),this.verificarInstancia()}authService=d(A);verificarIsAdmin(){this.authService.isAdmin().subscribe({next:e=>{e===!0&&this.isAdmin.set(!0)}})}isAuthenticaded=v(!1);instanciaService=d(xe);verificarInstancia(){this.instanciaService.getEstado().subscribe({next:e=>{let t=e?.status?.accountStatus?.status==="authenticated";this.isAuthenticaded.set(t)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-navbar"]],standalone:!0,features:[f],decls:15,vars:2,consts:[[1,"flex","flex-col","h-screen","gap-4","p-8"],[1,"flex","flex-row","items-center","justify-between"],[1,"text-[32px]","font-black"],["mat-icon-button","","matTooltip","Cerrar Sesi\xF3n",3,"click"],[1,"flex","flex-col","gap-3"],["routerLinkActive","link-active",1,"w-[400px]","h-[160px]","flex","flex-col","p-4","bg-white","hover:bg-colorBlack","hover:text-white","rounded-[20px]","shadow-lg",3,"routerLink"],["routerLink","/menu/panel-admin","routerLinkActive","link-active",1,"w-[400px]","h-[160px]","flex","flex-col","p-4","bg-white","hover:bg-colorBlack","hover:text-white","rounded-[20px]","shadow-lg"],[1,"flex-1"],[1,"bg-colorBlack","rounded-[20px]","items-center","px-4","gap-4","flex","h-[64px]"],[2,"width","42px","height","42px","font-size","42px"],[1,"text-colorGreen"],[1,"text-lg","font-black","text-white"],[1,"text-colorT1"]],template:function(t,o){t&1&&(i(0,"nav",0)(1,"div",1)(2,"span",2),l(3,"Sky Message"),r(),i(4,"button",3),w("click",function(){return o.logout()}),i(5,"mat-icon"),l(6,"logout"),r()()(),i(7,"div",4),X(8,Oe,6,4,"a",5,W),x(10,Pe,6,0,"a",6),r(),c(11,"div",7),i(12,"div",8),x(13,He,4,0)(14,Ge,4,0),r()()),t&2&&(m(8),J(o.menuList),m(2),g(o.isAdmin()?10:-1),m(3),g(o.isAuthenticaded()?13:14))},dependencies:[_,E,ce,me,ue,pe,he,fe,ve,ge],encapsulation:2})};var M=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-menu"]],standalone:!0,features:[f],decls:4,vars:0,consts:[[1,"flex","bg-colorGrey"],[1,"flex-1","h-screen","py-4","pr-8","overflow-y-auto"]],template:function(t,o){t&1&&(i(0,"div",0),c(1,"app-navbar"),i(2,"div",1),c(3,"router-outlet"),r()())},dependencies:[N,E,k],encapsulation:2})};var Fe=O(ye());var F=class n{TOKEN_KEY="token";getToken(){return localStorage.getItem(this.TOKEN_KEY)}saveToken(e){localStorage.setItem(this.TOKEN_KEY,e)}removeToken(){localStorage.removeItem(this.TOKEN_KEY)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=b({token:n,factory:n.\u0275fac,providedIn:"root"})};function qe(n,e){n&1&&(i(0,"div",7),c(1,"div",10),r())}function Ke(n,e){n&1&&(i(0,"div")(1,"button",11)(2,"span",12),l(3,"Ingresar"),r()()())}function Ve(n,e){if(n&1&&(i(0,"div",7)(1,"span",13),l(2),r()()),n&2){let t=ee();m(2),y(t.error)}}var T=class n{authService=d(A);isLoading=v(!1);error;formulario=new we({user:new L("",[D.required]),password:new L("",[D.required])});router=d(I);prefsService=d(F);login(){return P(this,null,function*(){try{if(this.formulario.invalid){Fe.default.fire({icon:"error",title:"Error",text:"Debes llenar todos los campos"});return}let{user:e,password:t}=this.formulario.value;this.isLoading.set(!0);let o=yield this.authService.login(e,t);this.prefsService.saveToken(o.access_token),this.router.navigate(["menu","enviar-mensajes"])}catch(e){this.error=e}finally{this.isLoading.set(!1)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-login"]],standalone:!0,features:[f],decls:18,vars:3,consts:[[1,"flex","items-center","justify-center","w-full","h-full","p-12","overflow-y-auto","bg-colorGrey"],[1,"flex","w-full","h-full","gap-16","p-16","bg-white","rounded-lg","shadow-lg"],[1,"flex","flex-col","justify-center","flex-1","gap-4",3,"submit","formGroup"],[1,"text-[32px]","font-black"],[1,"text-[20px]","text-colorT1"],["type","text","placeholder","Usuario","required","","formControlName","user",1,"border","border-colorBlack","text-colorBlack","text-[20px]","rounded-lg","focus:ring-colorBlack","focus:border-colorBlack","block","w-full","p-2.5"],["type","password","placeholder","Contrase\xF1a","required","","formControlName","password",1,"border","border-colorBlack","text-colorBlack","text-[20px]","rounded-lg","focus:ring-colorBlack","focus:border-colorBlack","block","w-full","p-2.5"],[1,"flex","justify-center"],[1,"flex-[2]","justify-center","items-center","hidden","md:flex"],["src","../../../assets/images/prueba.png","alt",""],[1,"loader"],["type","submit",1,"flex","justify-center","w-full","gap-2","px-4","py-2","text-center","text-white","rounded-lg","shadow-lg","bg-colorBlack","hover:bg-colorBlack2","hover:text-white","active:text-white","active:bg-black"],[1,"text-lg","font-bold"],[1,"text-red-900"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1)(2,"form",2),w("submit",function(){return o.login()}),i(3,"span",3),l(4,"Iniciar Sesi\xF3n"),c(5,"br"),l(6,"en Sky Message"),r(),i(7,"p",4),l(8," Ingresa tu nombre de usuario y contrase\xF1a para iniciar "),r(),i(9,"div"),c(10,"input",5),r(),i(11,"div"),c(12,"input",6),r(),x(13,qe,2,0,"div",7)(14,Ke,4,0,"div")(15,Ve,3,1,"div",7),r(),i(16,"div",8),c(17,"img",9),r()()()),t&2&&(m(2),S("formGroup",o.formulario),m(11),g(o.isLoading()?13:14),m(2),g(o.error?15:-1))},dependencies:[_,Ae,_e,Ce,be,Se,Ee,ke,Ie],encapsulation:2})};var Te=[{path:"login",component:T},{path:"menu",component:M,loadChildren:()=>import("./chunk-UCSENNCV.js").then(n=>n.menuRoutes),canActivate:[Ne]},{path:"**",redirectTo:"login"}];var Ye="@",ze=(()=>{let e=class e{constructor(o,a,s,p,h){this.doc=o,this.delegate=a,this.zone=s,this.animationType=p,this.moduleImpl=h,this._rendererFactoryPromise=null,this.scheduler=d(Z,{optional:!0}),this.loadingSchedulerFn=d(Ue,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let o=()=>this.moduleImpl??import("./chunk-CKCEB4BO.js").then(s=>s),a;return this.loadingSchedulerFn?a=this.loadingSchedulerFn(o):a=o(),a.catch(s=>{throw new q(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:p})=>{this._engine=s(this.animationType,this.doc);let h=new p(this.delegate,this._engine,this.zone);return this.delegate=h,h})}createRenderer(o,a){let s=this.delegate.createRenderer(o,a);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let p=new j(s);return a?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(h=>{let Be=h.createRenderer(o,a);p.use(Be),this.scheduler?.notify(10)}).catch(h=>{p.use(s)}),p}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(a){U()},e.\u0275prov=b({token:e,factory:e.\u0275fac});let n=e;return n})(),j=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,o,a){this.delegate.insertBefore(e,t,o,a)}removeChild(e,t,o){this.delegate.removeChild(e,t,o)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,o,a){this.delegate.setAttribute(e,t,o,a)}removeAttribute(e,t,o){this.delegate.removeAttribute(e,t,o)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,o,a){this.delegate.setStyle(e,t,o,a)}removeStyle(e,t,o){this.delegate.removeStyle(e,t,o)}setProperty(e,t,o){this.shouldReplay(t)&&this.replay.push(a=>a.setProperty(e,t,o)),this.delegate.setProperty(e,t,o)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,o){return this.shouldReplay(t)&&this.replay.push(a=>a.listen(e,t,o)),this.delegate.listen(e,t,o)}shouldReplay(e){return this.replay!==null&&e.startsWith(Ye)}},Ue=new K("");function Re(n="animations"){return Q("NgAsyncAnimations"),V([{provide:$,useFactory:(e,t,o)=>new ze(e,t,o,n),deps:[oe,le,Y]},{provide:z,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}function De(n,e){let t=localStorage.getItem("token"),o=new ie({Authorization:`Bearer ${t}`}),a=n.clone({headers:o});return e(a).pipe(G(s=>{let p=s?.error;return console.log(p),H(p?.message||"Error desconocido")}))}var Le={providers:[ne({eventCoalescing:!0}),de(Te),Re(),re(ae([De]))]};var R=class n{title="sky-message-angular";static \u0275fac=function(t){return new(t||n)};static \u0275cmp=u({type:n,selectors:[["app-root"]],standalone:!0,features:[f],decls:1,vars:0,template:function(t,o){t&1&&c(0,"router-outlet")},dependencies:[k],encapsulation:2})};se(R,Le).catch(n=>console.error(n));
